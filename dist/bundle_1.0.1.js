(()=>{const e=document.querySelector(".used-licenses"),s=document.querySelector(".available-license"),t=document.querySelector(".wallet"),a=document.querySelector(".submit-email"),i=document.querySelector(".input-email"),o=document.querySelector(".loading-wrapper"),r=document.querySelector(".error-wrapper"),n=document.querySelector(".error-message"),d=document.querySelector(".animation-text"),c=document.querySelector(".text-available-licenses"),l=document.querySelector(".email-form");i.style.color="white";let u=0;(async()=>{try{const e=await window.ethereum.request({method:"eth_accounts"});if(console.log(e[0]),u=e[0],e.length>0){const e=await axios.get(`https://reservax.55unity.com/users/info?address=${u}`,{headers:{authentication:"a9a5d580243b9ee0ab8377695b573e3aa8877803ac2596067d4b8e4ac8254266"}});return a.classList.remove("is-disabled"),d.classList.add("is-hidden"),c.classList.remove("is-hidden"),0===e?.data.user.tokenQtd&&window.location.assign("/not-holder"),e}}catch(e){window.location.assign("/area-do-cliente"),console.log(e)}})().then((i=>{console.log("res",i),e.innerText=i.data.user.tokenQtd-i.data.user.claimCurso,s.innerText=i.data.user.tokenQtd,t.innerText=u.substring(0,5)+"..."+u.substring(u.length-4,u.length),a.classList.remove("is-disabled"),i.data.user.tokenQtd===i.data.user.claimCurso&&(c.innerText="Você já utilizou todas as licenças disponíveis",l.classList.add("is-hidden"))}));a.addEventListener("click",(async()=>{await(async()=>{try{return o.classList.remove("is-hidden"),a.classList.add("is-hidden"),r.classList.remove("active-error"),r.classList.add("is-hidden"),await axios.post("https://reservax.55unity.com/users/claim-curso",{address:u,emails:[i.value]},{headers:{authentication:"a9a5d580243b9ee0ab8377695b573e3aa8877803ac2596067d4b8e4ac8254266"}})}catch(s){o.classList.add("is-hidden"),console.log(s),e=s.response?.data,o.classList.add("is-hidden"),n.innerText=e,r.classList.remove("is-hidden"),r.classList.add("active-error"),a.classList.remove("is-hidden")}var e})()&&window.location.assign("/sucesso-curso")})),window.ethereum||console.log("Instale o metamask!")})();